<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>语音情感识别</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>语音情感识别</h1>
      <p class="subtitle">实时语音分析 — 情感 / 转录 / 事件检测</p>
    </header>

    <!-- 模式选择 -->
    <div class="mode-selector">
      <label class="mode-option">
        <input type="radio" name="mode" value="sensevoice" checked>
        <span class="mode-card">
          <strong>SenseVoice</strong>
          <small>一站式: ASR + 7类情感 + 事件检测</small>
        </span>
      </label>
      <label class="mode-option">
        <input type="radio" name="mode" value="paraformer">
        <span class="mode-card">
          <strong>Paraformer + SpeechBrain</strong>
          <small>中文ASR + 4类情感概率</small>
        </span>
      </label>
    </div>

    <!-- 连接控制 -->
    <div class="connect-bar">
      <button id="btn-connect" class="btn-connect">连接</button>
      <span id="connect-steps" class="connect-steps"></span>
    </div>

    <!-- 状态栏 -->
    <div class="status-bar">
      <span id="connection-status" class="status-dot disconnected"></span>
      <span id="status-text">就绪</span>
      <span id="timer" class="timer"></span>
    </div>

    <!-- 波形可视化 -->
    <div class="waveform-container">
      <canvas id="waveform" width="600" height="100"></canvas>
    </div>

    <!-- 录音按钮 -->
    <div class="controls">
      <button id="btn-record" class="btn-record">开始录音</button>
      <button id="btn-stop" class="btn-stop" disabled>停止</button>
    </div>

    <!-- 结果展示 -->
    <div id="result-panel" class="result-panel hidden">
      <h2>分析结果</h2>

      <!-- 转录 -->
      <div class="result-section">
        <h3>转录文本</h3>
        <p id="result-transcript" class="transcript"></p>
        <p id="result-language" class="meta"></p>
      </div>

      <!-- 情感 -->
      <div class="result-section">
        <h3>情感分析</h3>
        <div id="result-emotion"></div>
      </div>

      <!-- 事件（仅 SenseVoice） -->
      <div id="event-section" class="result-section hidden">
        <h3>语音事件</h3>
        <p id="result-event"></p>
      </div>

      <!-- 音频特征 -->
      <div class="result-section">
        <h3>音频特征</h3>
        <p id="result-audio-features"></p>
      </div>

      <!-- 文本情感 -->
      <div id="sentiment-section" class="result-section hidden">
        <h3>文本情感 (SnowNLP)</h3>
        <p id="result-text-sentiment"></p>
      </div>
    </div>

    <!-- 错误提示 -->
    <div id="error-panel" class="error-panel hidden">
      <p id="error-message"></p>
    </div>
  </div>

  <script src="js/audio.js"></script>
  <script src="js/websocket.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
